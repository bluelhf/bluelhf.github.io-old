{"version":3,"file":"home.js","sources":["../../src/home/ProjectCard.svelte","../../src/home/Home.svelte","../../src/home/home.js"],"sourcesContent":["<script>\n    export let project;\n    let promise = Promise.resolve([]);\n\tasync function fetchMeta() {\n        try {\n            const response = await fetch(`https://opengraph.githubassets.com/1/${project.full_name}`, {\n                \"method\": \"GET\"\n            });\n            return response.body;\n        } catch (e) {\n            return {};\n        }\n\t}\n    promise = fetchMeta();\n</script>\n\n<div class=\"card-wrapper\">\n    <div class=\"card-template\">\n        <img alt=\"\" src=\"/dist/home/assets/template.webp\" width=\"300\" height=\"150\" />\n    </div>\n    <div class=\"card\">\n        <a href={project.html_url}>\n            <img alt=\"\" src={`https://opengraph.githubassets.com/1/${project.full_name}`}/>\n        </a>\n    </div>\n\n</div>\n\n\n<style>\n.card, .card-template {\n    animation: fadeIn 0.5s;\n    animation-timing-function: cubic-bezier();\n}\n\n@media all and (prefers-color-scheme: dark) {\n    .card img, .card-template img {\n        box-shadow: 0px 0px 5px grey;\n    }\n}\n\n@media not all and (prefers-color-scheme: dark) {\n    .card img, .card-template img {\n        box-shadow: 0px 0px 5px #eeeeee;\n    }\n}\n\n.card-wrapper {\n    display: grid;\n}\n\n.card, .card-template {\n    grid-area: 1 / 1;\n}\n\n.card img, .card-template img {\n    margin: 1%;\n    max-width: 85vw;\n    margin: 0 0 1em 0;\n    width: 30em;\n    border-radius: 10px;\n    height: auto;\n    \n\n    transition: all .2s ease-in-out; \n}\n\n.card img:hover, .card-template img:hover {\n    transform: scale(1.1);\n}\n\n</style>","<script>\n\texport let src, user;\n\timport ProjectCard from \"./ProjectCard.svelte\";\n\n    Array.prototype.asyncFilter =function( filterFn) {\n       const arr = this;\n       return new Promise(function(resolve){\n         const booleanArr = [];\n         arr.forEach(function (e) { \n            booleanArr.push(filterFn(e))\n         })\n         Promise.all(booleanArr).then(function (booleanArr) {\n           const arr2 = arr.filter(function (e, i) {\n             return booleanArr[i]\n           })\n           resolve(arr2)\n         })\n       })\n    }\n\n\tasync function fetchProjects() {\n        let cacheDeath = window.localStorage.getItem(\"project-cache-death\");\n        if (cacheDeath != undefined && Date.now() < cacheDeath) {\n            return JSON.parse(window.localStorage.getItem(\"project-cache\"));\n        } else {\n            try {\n                let response = await fetch(`https://api.github.com/users/${user}/repos`, {\n                    method: 'GET',\n                    referrer: document.URL\n                });\n                if (!response.ok)\n                    throw new Error((await response.json()).message);\n                response = await response.json();\n                response = await response.asyncFilter(async (project) => {\n                    let resp = await fetch(`https://api.github.com/repos/${project.full_name}/contents/README.md`);\n                    return resp.ok && !project.fork && !project.name.includes(\"bluelhf\");\n                });\n\n                return response;\n            } catch (e) {\n                console.log(\n`${e}\n\nThere would usually be a list of my projects on the site,\nbut something went wrong while fetching the projects,\nso they won't be shown.`\n                );\n                return [];\n            }\n        }\n\t}\n\n\tlet socials = {\n\t\tdiscord: \"https://discord.com/users/135726926886207488\",\n\t\ttwitter: \"https://twitter.com/IlariSuhonen\",\n\t\tgithub: \"https://github.com/bluelhf/\",\n\t\tpolywork: \"https://poly.work/bluelhf/\"\n\t}\n\n\tlet promise = fetchProjects();\n    promise.then(res => {\n        window.localStorage.setItem(\"project-cache\", JSON.stringify(res));\n        window.localStorage.setItem(\"project-cache-death\", Date.now() + 7_200_000);\n    })\n</script>\n\t\t\n<main>\n    <img id=\"photo\" src={src} alt=\"Ilari Suhonen\"/>\n    \n    <div id=\"header\">\n        <h1>hey, i'm ilari üë®‚Äçüíª</h1>\n        <a class=\"icon\" target=\"_blank\" href={socials.discord}><i class=\"fab fa-discord\" title=\"@Ilari\"></i></a>\n        <a class=\"icon\" target=\"_blank\" href={socials.github}><i class=\"fab fa-github\" title=\"@bluelhf\"></i></a>\n        <a class=\"icon\" target=\"_blank\" href={socials.twitter}><i class=\"fab fa-twitter\" title=\"@IlariSuhonen\"></i></a>\n        <a class=\"icon\" target=\"_blank\" href={socials.polywork}><i class=\"fas fa-th\" title=\"@bluelhf\"></i></a>\n    </div>\n    <p id=\"text\">\n        i'm a {Math.floor((new Date() - new Date('2005-12-21').getTime()) / 3.15576e+10)}-year-old programmer with a particular\n        interest in java ‚òï<br/><br/> i've messed around with all kinds of\n        software and written many projects of my own, too.\n    </p>\n\n    \n    {#await promise}\n        <!-- do nothing -->\n    {:then projects}\n        {#if projects.length != 0}\n            <h2>some of my projects</h2>\n            {#each projects as project}\n                <div>\n                    <ProjectCard project={project} />\n                </div>\n            {/each}\n        {:else}\n            <p>\n                oh no!<br/>\n                it looks like my projects failed to load...<br/>\n                check the console for any errors!<br/>\n            </p>\n        {/if}\n    {/await}\n</main>\n\n<style>\n\n    *:focus {\n        transform: scale(1.05);\n        outline: none;\n        transition: transform 0.05s ease;\n        text-shadow: rgba(21, 156, 228, 0.4) 0px 0px 10px;\n    }\n\n    a {\n        color: rgb(0,100,200);\n        text-decoration: underline;\n        text-decoration-color: transparent;\n        transition: 0.25s;\n        -webkit-text-decoration-color: transparent;\n        -moz-text-decoration-color: transparent;\n    }\n\n    a:hover {\n        text-decoration-color:rgb(0,100,200);\n        -webkit-text-decoration-color: rgb(0,100,200);\n        -moz-text-decoration-color: rgb(0,100,200);\n    }\n\n\n    a:visited {\n        color: rgb(0,80,160);\n    }\n\n\t@media all and (prefers-color-scheme: dark) {\n\t\th1 {\n\t\t\tcolor: #7FBDDC !important;\n\t\t}\n\t}\n\t\n\t@media not all and (prefers-color-scheme: dark) {\n\t\th1 {\n\t\t\tcolor: rgb(51, 51, 51) !important;\n\t\t}\n\t}\n\n\t.icon i {\n\t\tcolor: var(--main-bg-colour);\n\t\tfilter: invert();\n\t\tmargin: 0 .5em;\n\t\t\n\t\ttransition: all .2s ease-in-out;\n\t}\n\n\t\n\t.icon i:hover {\n\t\ttransform: rotateZ(12deg);\n\t}\n\n\t#header {\n\t\tmargin-bottom: 3vh;\n\t}\n\n\t#header h1 {\n\t\tmargin-bottom: 0;\n\t\tfont-size: calc(max(5vw, 5vh));\n\t}\n\n\t#text {\n\t\tmargin: 0 auto;\n\t\tmax-width: 30em;\n\t}\n\n\t#photo {\n\t\tobject-fit: cover;\n\t\twidth: max(20vh, 20vw);\n\t\theight: auto;\n\t\tborder-radius: 50%;\n\t\tanimation: fadeIn 0.95s;\n\t\tmargin: 0 auto;\n        padding-top: 1vh;\n\t}\n\n\t:root {\n\t\tbackground-color: var(--main-bg-colour);\n\t}\n\n\tmain {\n\t\tdisplay: grid;\n\t\tmax-width: 100%;\n\t\tmargin: 0 auto;\n\t\talign-items: center;\n\t\tdisplay: grid;\n\t\tanimation: fadeIn 0.75s;\t\n\t\t\n\t\ttext-align: center;\n\t}\n\n\th1 {\n\t\tcolor: #ff3e00;\n\t\tfont-size: 4em;\n\t\tfont-weight: 100;\n\t}\n</style>","import Home from './Home.svelte';\n\nwindow.addEventListener(\"load\", showPage);\n\nfunction showPage() {\n  \t\n\tlet done = 0;\n\tlet total = 0;\n\t[...document.querySelectorAll('[data-src]')].forEach(img => {\n\t\ttotal++;\n\t\tconsole.log(total);\n\t\timg.onload = () => done++;\n\t\timg.src = img.dataset.src;\n\t});\n\n\tsetInterval(async () => {\n\t\tif (done < total) return;\n\t\tdocument.body.classList.remove('js-loading');\n\t}, 100);\n}\n\nlet pastVW = [window.outerWidth, window.outerWidth];\nsetInterval(() => {\n\tif (window.outerWidth != pastVW[0] && window.outerWidth == pastVW[1]) {\n\t\tconsole.log(\"The size of the viewport has changed without a reload.\\nThis fucks with the vw unit on some browsers for some reason.\\nReloading to accommodate.\");\n\t\tlocation.reload();\n\t}\n\tpastVW[0] = pastVW[1];\n\tpastVW[1] = window.outerWidth;\n}, 100);\n\nconst home = new Home({\n\ttarget: document.body,\n\tprops: {\n\t\tsrc: '/dist/home/assets/picrew.webp',\n        user: 'bluelhf'\n\t}\n});\n\nexport default home;"],"names":["ctx","full_name","html_url","insert","append","project","Promise","resolve","fetch","method","body","e","fetchMeta","length","Math","floor","Date","getTime","discord","github","twitter","polywork","src","user","Array","prototype","asyncFilter","filterFn","arr","this","booleanArr","forEach","push","all","then","arr2","filter","i","promise","cacheDeath","window","localStorage","getItem","undefined","now","JSON","parse","response","referrer","document","URL","ok","Error","json","message","fork","name","includes","console","log","fetchProjects","res","setItem","stringify","addEventListener","done","total","querySelectorAll","img","onload","dataset","setInterval","async","classList","remove","pastVW","outerWidth","location","reload","home","target","props"],"mappings":"mgBAsBqEA,KAAQC,sEAD5DD,KAAQE,gGALzBC,SACIC,cAGAA,OACIA,OACIA,yEAAyDJ,KAAQC,uCAD5DD,KAAQE,+EApBVG,YACGC,QAAQC,wCAGSC,8CAA8CH,EAAQJ,aACzEQ,OAAU,SAEEC,WACXC,aAIHC,0SCyEkB,GAAnBZ,KAASa,ocAQVV,iEANOH,0BAALa,qNADFV,oGACOH,aAALa,6HAAAA,8DAAAA,6LAE4Bb,oFAD1BG,qPAZDW,KAAKC,WAAWC,SAAaA,KAAK,cAAcC,WAAa,kHAMhEjB,uNAPK,qBACwE,8FACrD,mJAXXA,+OAIqBA,KAAQkB,gJACRlB,KAAQmB,qJACRnB,KAAQoB,4IACRpB,KAAQqB,uMARtDlB,SACIC,cAEAA,OACIA,cACAA,OAAuDA,cACvDA,OAAsDA,cACtDA,OAAuDA,cACvDA,OAAwDA,cAE5DA,4BAEsBA,OAAKA,oHAXNJ,6LAlEbsB,EAAGC,KAAEA,KAGbC,MAAMC,UAAUC,qBAAuBC,SAC9BC,EAAMC,gBACDvB,kBAAiBC,SACpBuB,KACNF,EAAIG,kBAAkBpB,GACnBmB,EAAWE,KAAKL,EAAShB,OAE5BL,QAAQ2B,IAAIH,GAAYI,eAAeJ,SAC/BK,EAAOP,EAAIQ,iBAAiBzB,EAAG0B,UAC5BP,EAAWO,MAEpB9B,EAAQ4B,cA4CdG,uBAtCOC,EAAaC,OAAOC,aAAaC,QAAQ,0BAC3BC,MAAdJ,GAA2BvB,KAAK4B,MAAQL,SACjCM,KAAKC,MAAMN,OAAOC,aAAaC,QAAQ,0BAGtCK,QAAiBvC,sCAAsCe,WACvDd,OAAQ,MACRuC,SAAUC,SAASC,UAElBH,EAASI,aACAC,aAAaL,EAASM,QAAQC,gBAC5CP,QAAiBA,EAASM,OAC1BN,QAAiBA,EAASrB,6BACLlB,sCAAsCH,EAAQJ,iCACnDkD,KAAO9C,EAAQkD,OAASlD,EAAQmD,KAAKC,SAAS,aAGvDV,QACFpC,UACL+C,QAAQC,OACrBhD,sJAkBYiD,UACXtB,EAAQJ,MAAK2B,IACTrB,OAAOC,aAAaqB,QAAQ,gBAAiBjB,KAAKkB,UAAUF,IAC5DrB,OAAOC,aAAaqB,QAAQ,sBAAuB9C,KAAK4B,MAAQ,4EATtE1B,QAAS,+CACTE,QAAS,mCACTD,OAAQ,8BACRE,SAAU,mCCtDZmB,OAAOwB,iBAAiB,QAExB,WAEC,IAAIC,EAAO,EACPC,EAAQ,EACZ,IAAIjB,SAASkB,iBAAiB,eAAepC,SAAQqC,IACpDF,IACAR,QAAQC,IAAIO,GACZE,EAAIC,OAAS,IAAMJ,IACnBG,EAAI9C,IAAM8C,EAAIE,QAAQhD,OAGvBiD,aAAYC,UACPP,EAAOC,GACXjB,SAASvC,KAAK+D,UAAUC,OAAO,gBAC7B,QAGJ,IAAIC,EAAS,CAACnC,OAAOoC,WAAYpC,OAAOoC,YACxCL,aAAY,KACP/B,OAAOoC,YAAcD,EAAO,IAAMnC,OAAOoC,YAAcD,EAAO,KACjEjB,QAAQC,IAAI,oJACZkB,SAASC,UAEVH,EAAO,GAAKA,EAAO,GACnBA,EAAO,GAAKnC,OAAOoC,aACjB,KAEE,MAACG,EAAO,4EAAS,CACrBC,OAAQ/B,SAASvC,KACjBuE,MAAO,CACN3D,IAAK,gCACCC,KAAM"}